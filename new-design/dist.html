<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Distribution Dashboard</title>
    
    <!-- Bootstrap and supporting libraries -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style/bootstrap-multiselect.css" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="lib/daterangepicker-bs3.css" />
    <link rel="stylesheet" type="text/css" href="style/elessar.css" />
    
    <link rel="stylesheet" type="text/css" href="style/metricsgraphics.css" />
    
    <style>
    /* dropdown style overrides */
    .btn-group > .multiselect {
        border: transparent !important;
        padding: 6px 3px !important;
        font-size: inherit !important;
    }
    .select2-container { width: auto !important; }
    .select2-selection { border: transparent !important; }
    
    /* Rangebar style overrides */
    .elessar-rangebar {
        border-radius: 4px;
        background: #CCC;
        box-shadow: inset 0 0 3px 0px rgba(0,0,0,0.5);
    }
    .elessar-range {
        background: #A53E35;
        border-radius: 4px;
        color: white;
        font-weight: bold;
    }
    </style>
</head>
<body>
    <div class="container-fluid">
        <header>
            <form id="histogram-filters" class="navbar-form" style="float: right; margin: 0">
                <div class="input-group">
                    <span class="input-group-btn">
                        <button type="button" id="get-permalink" class="btn btn-default" title="Get Permalink"><span class="glyphicon glyphicon-link"></span></button>
                    </span>
                    <input type="text" id="permalink-value" class="form-control">
                </div>
            </form>
            <h1>Distribution Dashboard</h1>
        </header>
        <div class="row">
            <div class="col-md-12">
                <h2 style="font-size: 18px; margin-bottom: 0">
                    <select id="measure" class="select2" title="Value being measured"></select>
                    distribution for
                    <select id="channel-version" class="select2" title="Build version"></select>
                    for
                    <select id="filter-product" class="multiselect" title="Product name" data-all-selected="all products" multiple></select>
                    <select id="filter-arch" class="multiselect" title="Product architecture" data-all-selected="on any architecture" multiple></select>
                    on
                    <select id="filter-os" class="multiselect" title="Target OS" data-all-selected="any OS" multiple></select>
                    <select id="filter-os-version" class="multiselect" title="Target OS version" data-all-selected="for any version" multiple></select>
                    <button class="btn btn-default" id="switch-views" title="Switch to the evolution view">Evolution View</button>
                </h2>
                <h3 id="measure-description" style="font-size: 14px; margin: 0 3px"></h3>
                <figure class="col-md-12">
                    <div class="col-md-8" id="distribution"></div>
                    <div class="col-md-4" id="summary">
                        <dl class="dl-horizontal">
                            <dt title="The type of the histogram (e.g., linear, exponential, Boolean)">Histogram Kind</dt><dd id="prop-kind"></dd>
                            <dt title="Total number of Telemetry pings shown">Submissions</dt><dd id="prop-submissions"></dd>
                            <dt title="Total number of measurements in the histogram">Count</dt><dd id="prop-count"></dd>
                            <dt title="Number of distinct dates shown">Number of dates</dt><dd id="prop-dates"></dd>
                            <dt title="Range of dates currently shown">Selected Dates</dt><dd id="prop-date-range"></dd>
                            <span class="linear-only">
                                <hr>
                                <dt title="Simple average of all values">Mean</dt><dd id="prop-mean"></dd>
                                <dt title="Standard deviation of all values">Std. dev.</dt><dd id="prop-stddev"></dd>
                            </span>
                            <span class="exponential-only">
                                <hr>
                                <dt title="Simple average of all values">Mean</dt><dd id="prop-mean2"></dd>
                                <dt title="Log-scale average of all values">Geo. mean</dt><dd id="prop-geometric-mean"></dd>
                                <dt title="Log-scale standard deviation of all values">Geo. std. dev.</dt><dd id="prop-geometric-stddev"></dd>
                            </span>
                            <span class="linear-only exponential-only">
                                <hr>
                                <dt>5th Percentile</dt><dd id="prop-p5"></dd>
                                <dt>25th Percentile</dt><dd id="prop-p25"></dd>
                                <dt>Median</dt><dd id="prop-p50"></dd>
                                <dt>75th Percentile</dt><dd id="prop-p75"></dd>
                                <dt>95th Percentile</dt><dd id="prop-p95"></dd>
                                <br>
                                <div class="alert alert-warning">
                                    <strong >Notice</strong> percentiles are estimated based on values in the histogram. Values are only guaranteed to be accurate to the nearest bucket.
                                </div>
                            </span>
                        </dl>
                    </div>
                </figure>
            </div>
        </div>
        <div class="row">
            <form class="form-horizontal" style="margin: 10px 50px">
                <span id="date-range-controls" class="form-group" style="width: 230px; display: inline-block; margin: 0">
                    <span class="input-prepend input-group">
                        <span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
                        <input type="text" name="date-range" style="width: 100%" id="date-range" class="form-control date-range"/>
                    </span>
                </span>
                <span id="range-bar" class="pull-right"></span>
            </form>
        </div>
    </div>
    
    <!-- Bootstrap and supporting libraries -->
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap-multiselect.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
    <script type="text/javascript" src="lib/daterangepicker.js"></script>
    <script src="lib/elessar.min.js"></script>
    
    <!-- MetricsGraphics libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
    <script src="lib/metricsgraphics.js"></script>
    
    <!--
        big.js and telemetry.js from telemetry.mozilla.org
        if you're not deploying to telemetry.mozilla.org you must include these
        from:
            - telemetry.mozilla.org/v1/big.js
            - telemetry.mozilla.org/v1/telemetry.js
        (we'll try to keep it backwards compatible)
    -->
    <script src="v1/big.js"></script>
    <script src="v1/telemetry.js"></script>
    
    <!-- Initialize controls -->
    <script type="text/javascript">
    $(document).ready(function() {
        // Select boxes
        $(".select2").select2({dropdownAutoWidth: true}).each(function(i, select) {
            $(this).next().css("margin-top", "-0.25em"); // Align the control so that the baseline matches surrounding text
        });
        
        // Multiselect boxes
        $('.multiselect').each(function(i, select) {
            var $this = $(this);
            var options = {
                enableFiltering: true,
                enableCaseInsensitiveFiltering: true,
                includeSelectAllOption: true,
                allSelectedText: $this.data("all-selected") !== undefined ? $this.data("all-selected") : "Any",
                maxHeight: 500,
            };
            if ($this.attr("title") !== undefined) {
                options.nonSelectedText = $this.attr("title");
            }
            $this.multiselect(options);
            $this.next().css("margin-top", "-0.25em"); // Align the control so that the baseline matches surrounding text
        });
        
        // Date range pickers
        $(".date-range").daterangepicker();
    });
    </script>
    <script src="dist.js"></script>
</body>
</html>
